<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAP Supplies - ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ</title>
    <meta name="description" content="ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ - ููุตุฉ ุชูุฑูุฏุงุช MAP">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin-styles.css">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>

<body>
    <!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุจุงูุฑูุฒ ุงูุณุฑู -->
    <div id="admin-login-page" class="page active">
        <div class="admin-login-container">
            <div class="admin-login-card">
                <div class="admin-logo">
                    <img src="6024030016393382674.jpg" alt="MAP Supplies Logo" class="admin-logo-img">
                    <p class="admin-subtitle">ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ</p>
                </div>

                <form id="admin-code-form" onsubmit="verifyAdminCode(event)">
                    <div class="form-group">
                        <label for="admin-code">ุงูุฑูุฒ ุงูุณุฑู</label>
                        <input type="password" id="admin-code" required placeholder="ุฃุฏุฎู ุงูุฑูุฒ ุงูุณุฑู"
                            autocomplete="off" maxlength="10">
                        <small class="form-hint">ุฃุฏุฎู ุงูุฑูุฒ ุงูุณุฑู ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู</small>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ุฏุฎูู</button>
                </form>

                <div class="admin-footer">
                    <p>ุงูุฑูุฒ ุงูุณุฑู: <code>map2026</code></p>
                    <a href="index.html" class="link">โ ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงุฎุชูุงุฑ ููุน ุงูุฏุฎูู -->
    <div id="admin-role-page" class="page">
        <div class="admin-login-container">
            <div class="admin-login-card">
                <button class="back-btn" onclick="backToCodePage()">โ ุงูุนูุฏุฉ</button>
                <div class="admin-header">
                    <h2>ุงุฎุชุฑ ููุน ุงูุญุณุงุจ</h2>
                    <p>ูุฑุฌู ุงุฎุชูุงุฑ ููุน ุงูุญุณุงุจ ููุฏุฎูู</p>
                </div>

                <div class="role-selection">
                    <button class="role-card" onclick="showAdminLoginForm()">
                        <div class="role-icon">๐</div>
                        <h3>ุงููุฏูุฑ ุงูุฑุฆูุณู</h3>
                        <p>ุตูุงุญูุงุช ูุงููุฉ ุนูู ุงููุธุงู</p>
                    </button>

                    <button class="role-card" onclick="showSupervisorLoginForm()">
                        <div class="role-icon">๐ค</div>
                        <h3>ูุดุฑู ูุฑุนู</h3>
                        <p>ุตูุงุญูุงุช ูุญุฏูุฏุฉ</p>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุชุณุฌูู ุฏุฎูู ุงููุฏูุฑ ุงูุฑุฆูุณู -->
    <div id="admin-main-login-page" class="page">
        <div class="admin-login-container">
            <div class="admin-login-card">
                <button class="back-btn" onclick="backToRolePage()">โ ุงูุนูุฏุฉ</button>
                <div class="admin-header">
                    <div class="role-icon">๐</div>
                    <h2>ุฏุฎูู ุงููุฏูุฑ ุงูุฑุฆูุณู</h2>
                    <p>ุฃุฏุฎู ุงูุฑูุฒ ุงูุณุฑู ุงูุฎุงุต ุจุงููุฏูุฑ</p>
                </div>

                <form id="admin-main-login-form" onsubmit="handleAdminLogin(event)">
                    <div class="form-group">
                        <label for="admin-main-code">ุงูุฑูุฒ ุงูุณุฑู ูููุฏูุฑ</label>
                        <input type="password" id="admin-main-code" required placeholder="ุฃุฏุฎู ุงูุฑูุฒ ุงูุฎุงุต ุจุงููุฏูุฑ">
                        <small class="form-hint">ููุงุญุธุฉ: ุงูุฑูุฒ ูุฎุชูู ุนู ุฑูุฒ ุงููุตูู ุงูุฃูู</small>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ุฏุฎูู</button>
                </form>

            </div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุชุณุฌูู ุฏุฎูู ุงููุดุฑู ุงููุฑุนู -->
    <div id="supervisor-login-page" class="page">
        <div class="admin-login-container">
            <div class="admin-login-card">
                <button class="back-btn" onclick="backToRolePage()">โ ุงูุนูุฏุฉ</button>
                <div class="admin-header">
                    <div class="role-icon">๐ค</div>
                    <h2>ุชุณุฌูู ุฏุฎูู ุงููุดุฑู ุงููุฑุนู</h2>
                    <p>ุฃุฏุฎู ุจูุงูุงุช ุงูุฏุฎูู ุงูุฎุงุตุฉ ุจู</p>
                </div>

                <form id="supervisor-login-form" onsubmit="handleSupervisorLogin(event)">
                    <div class="form-group">
                        <label for="supervisor-email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="supervisor-email" required placeholder="supervisor@mapsupplies.com">
                    </div>
                    <div class="form-group">
                        <label for="supervisor-password">ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="supervisor-password" required placeholder="โขโขโขโขโขโขโขโข">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">ุชุณุฌูู ุงูุฏุฎูู</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ -->
    <div id="admin-dashboard" class="page">
        <header class="dashboard-header admin-header">
            <div class="container">
                <div class="logo">
                    <img src="6024030016393382674.jpg" alt="MAP Supplies Logo" class="logo-img">
                </div>
                <nav class="dashboard-nav">
                    <a href="#" class="nav-link active" id="nav-dashboard" onclick="showAdminSection('dashboard')">ููุญุฉ
                        ุงูุชุญูู</a>
                    <a href="#" class="nav-link" id="nav-orders" onclick="showAdminSection('orders')">ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</a>
                    <a href="#" class="nav-link" id="nav-customers" onclick="showAdminSection('customers')">ุงูุนููุงุก</a>
                    <a href="#" class="nav-link" id="nav-supervisors"
                        onclick="showAdminSection('supervisors')">ุงููุดุฑููู</a>
                    <a href="#" class="nav-link" id="nav-categories" onclick="showAdminSection('categories')">ุฅุฏุงุฑุฉ
                        ุงููุฆุงุช</a>
                    <a href="#" class="nav-link" id="nav-notifications"
                        onclick="showAdminSection('notifications')">ุงูุฅุดุนุงุฑุงุช</a>
                    <a href="#" class="nav-link" id="nav-settings" onclick="showAdminSection('settings')">ุงูุฅุนุฏุงุฏุงุช</a>
                </nav>
                <div class="user-menu">
                    <span class="user-name" id="admin-user-name">ุงููุฏูุฑ ุงูุฑุฆูุณู</span>
                    <button class="btn btn-secondary btn-sm" onclick="handleAdminLogout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
                </div>
            </div>
        </header>

        <main class="dashboard-main">
            <!-- ูุณู ููุญุฉ ุงูุชุญูู -->
            <section id="admin-dashboard" class="dashboard-section active">
                <div class="container">
                    <h2 class="page-title">ุงูุฅุญุตุงุฆูุงุช</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">๐</div>
                            <div class="stat-content">
                                <h3 id="admin-total-orders">0</h3>
                                <p>ุฅุฌูุงูู ุงูุทูุจุงุช</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐ฅ</div>
                            <div class="stat-content">
                                <h3 id="admin-total-customers">0</h3>
                                <p>ุฅุฌูุงูู ุงูุนููุงุก</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">โณ</div>
                            <div class="stat-content">
                                <h3 id="admin-pending-orders">0</h3>
                                <p>ุทูุจุงุช ูุนููุฉ</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐ฐ</div>
                            <div class="stat-content">
                                <h3 id="admin-total-sales">0 ุฌ.ู</h3>
                                <p>ุฅุฌูุงูู ุงููุจูุนุงุช</p>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid" style="margin-top: 24px;">
                        <div class="stat-card">
                            <div class="stat-icon">โ</div>
                            <div class="stat-content">
                                <h3 id="admin-approved-orders">0</h3>
                                <p>ุทูุจุงุช ููุงูู ุนูููุง</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐</div>
                            <div class="stat-content">
                                <h3 id="admin-shipped-orders">0</h3>
                                <p>ุทูุจุงุช ูุดุญููุฉ</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐</div>
                            <div class="stat-content">
                                <h3 id="admin-quote-rate">0%</h3>
                                <p>ูุนุฏู ูุจูู ุงูุนุฑูุถ</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">๐</div>
                            <div class="stat-content">
                                <h3 id="admin-avg-order">0 ุฌ.ู</h3>
                                <p>ูุชูุณุท ูููุฉ ุงูุทูุจ</p>
                            </div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h3>ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
                        <div id="recent-activity-list" class="activity-list">
                            <p class="empty-state">ูุง ููุฌุฏ ูุดุงุท ุญุฏูุซ</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช -->
            <section id="admin-orders" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงูุทูุจุงุช</h2>
                    <div class="filters-bar">
                        <input type="text" id="admin-search" placeholder="ุจุญุซ ุจุฑูู ุงูุทูุจ ุฃู ุงุณู ุงูุนููู"
                            onkeyup="searchOrders()">
                        <select id="admin-status-filter" onchange="filterAdminOrders()">
                            <option value="all">ุฌููุน ุงูุญุงูุงุช</option>
                            <option value="pending">ูุนูู</option>
                            <option value="reviewing">ููุฏ ุงููุฑุงุฌุนุฉ</option>
                            <option value="quoted">ูุณุนุฑ</option>
                            <option value="approved">ููุงูู ุนููู</option>
                            <option value="preparing">ููุฏ ุงูุชุญุถูุฑ</option>
                            <option value="shipped">ูุดุญูู</option>
                            <option value="delivered">ูุณูู</option>
                            <option value="cancelled">ููุบู</option>
                        </select>
                        <input type="date" id="admin-date-filter" onchange="filterAdminOrders()">
                        <button class="btn btn-secondary" onclick="resetFilters()">ุฅุนุงุฏุฉ ุชุนููู</button>
                    </div>
                    <div id="admin-orders-list" class="admin-orders-list">
                        <p class="empty-state">ูุง ุชูุฌุฏ ุทูุจุงุช</p>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุงูุนููุงุก -->
            <section id="admin-customers" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงูุนููุงุก</h2>
                    <div class="filters-bar">
                        <input type="text" id="customers-search" placeholder="ุจุญุซ ุจุงุณู ุงูุดุฑูุฉ ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"
                            onkeyup="searchCustomers()">
                        <select id="customers-status-filter" onchange="filterCustomers()">
                            <option value="all">ุฌููุน ุงูุนููุงุก</option>
                            <option value="active">ูุดุท</option>
                            <option value="blocked">ูุญุธูุฑ</option>
                        </select>
                    </div>
                    <div id="customers-list" class="customers-list">
                        <p class="empty-state">ูุง ููุฌุฏ ุนููุงุก</p>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุงููุดุฑููู -->
            <section id="admin-supervisors" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ุงููุดุฑููู ุงููุฑุนููู</h2>
                    <button class="btn btn-primary" onclick="showAddSupervisorModal()">+ ุฅุถุงูุฉ ูุดุฑู ุฌุฏูุฏ</button>
                    <div id="supervisors-list" class="supervisors-list">
                        <p class="empty-state">ูุง ููุฌุฏ ูุดุฑููู</p>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุงูุฅุดุนุงุฑุงุช -->
            <section id="admin-notifications" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุณุฌู ุงูุฅุดุนุงุฑุงุช</h2>
                    <div class="notification-settings">
                        <h3>ุฅุนุฏุงุฏุงุช ุงูุฑุณุงุฆู</h3>
                        <form id="notification-template-form" onsubmit="saveNotificationTemplate(event)">
                            <div class="form-group">
                                <label for="notification-template">ูุต ุงูุฑุณุงูุฉ ุงูุงูุชุฑุงุถู</label>
                                <textarea id="notification-template"
                                    rows="4">ูุฑุญุจุงู [ุงุณู ุงูุนููู]ุ ุชู ุฅุถุงูุฉ ุนุฑุถ ุณุนุฑ ุฌุฏูุฏ ูุทูุจูู ุฑูู #[ุฑูู ุงูุทูุจ]. ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ููุฑุงุฌุนุฉ ุงูุชูุงุตูู. - ูุฑูู MAP Supplies</textarea>
                                <small class="form-hint">ุงุณุชุฎุฏู [ุงุณู ุงูุนููู] ู [ุฑูู ุงูุทูุจ] ููุชุบูุฑุงุช</small>
                            </div>
                            <button type="submit" class="btn btn-primary">ุญูุธ ุงููุงูุจ</button>
                        </form>
                    </div>
                    <div class="filters-bar">
                        <select id="notifications-status-filter" onchange="filterNotifications()">
                            <option value="all">ุฌููุน ุงูุฅุดุนุงุฑุงุช</option>
                            <option value="sent">ูุฑุณูุฉ</option>
                            <option value="failed">ูุดูุช</option>
                        </select>
                    </div>
                    <div id="notifications-log" class="notifications-log">
                        <p class="empty-state">ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช</p>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุฅุฏุงุฑุฉ ุงููุฆุงุช -->
            <section id="admin-categories" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุฅุฏุงุฑุฉ ูุฆุงุช ุงูููุชุฌุงุช</h2>
                    <div class="settings-card">
                        <h3>ุฅุถุงูุฉ ูุฆุฉ ุฌุฏูุฏุฉ</h3>
                        <form id="add-category-form" onsubmit="handleAddCategory(event)">
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="category-name">ุงุณู ุงููุฆุฉ *</label>
                                        <input type="text" id="category-name" required placeholder="ูุซุงู: ุฃุฏูุงุช ููุชุจูุฉ">
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="category-icon">ุฃููููุฉ ุงููุฆุฉ (Emoji) *</label>
                                        <input type="text" id="category-icon" required placeholder="ูุซุงู: ๐ฆ">
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ ุงููุฆุฉ</button>
                        </form>
                    </div>

                    <div class="recent-activity" style="margin-top: 24px;">
                        <h3>ุงููุฆุงุช ุงูุญุงููุฉ</h3>
                        <div id="categories-list-admin" class="activity-list">
                            <!-- ุณูุชู ููุคูุง ุจุฑูุฌูุงู -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- ูุณู ุงูุฅุนุฏุงุฏุงุช -->
            <section id="admin-settings" class="dashboard-section">
                <div class="container">
                    <h2 class="page-title">ุฅุนุฏุงุฏุงุช ุงููุธุงู</h2>
                    <div class="settings-card">
                        <h3>ูุนูููุงุช ุงูููุตุฉ</h3>
                        <p><strong>ุงูุงุณู:</strong> MAP Supplies - ุชูุฑูุฏุงุช MAP</p>
                        <p><strong>ุงูุฅุตุฏุงุฑ:</strong> 1.0.0</p>
                        <p><strong>ุชุงุฑูุฎ ุงูุฅุทูุงู:</strong> 2026</p>
                        <p><strong>ุงูุฑูุฒ ุงูุณุฑู:</strong> map2026</p>
                    </div>

                    <div class="settings-card">
                        <h3>ุฅุญุตุงุฆูุงุช ุงููุธุงู</h3>
                        <p><strong>ุฅุฌูุงูู ุงูุทูุจุงุช:</strong> <span id="settings-total-orders">0</span></p>
                        <p><strong>ุฅุฌูุงูู ุงูุนููุงุก:</strong> <span id="settings-total-customers">0</span></p>
                        <p><strong>ุฅุฌูุงูู ุงููุดุฑููู:</strong> <span id="settings-total-supervisors">0</span></p>
                        <p><strong>ุฅุฌูุงูู ุงูุฅุดุนุงุฑุงุช:</strong> <span id="settings-total-notifications">0</span></p>
                    </div>

                    <div class="settings-card">
                        <h3>ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h3>
                        <button class="btn btn-secondary" onclick="exportData()">ุชุตุฏูุฑ ุงูุจูุงูุงุช (JSON)</button>
                        <button class="btn btn-secondary" onclick="clearAllData()" style="margin-top: 8px;">ูุณุญ ุฌููุน
                            ุงูุจูุงูุงุช</button>
                        <small class="form-hint" style="display: block; margin-top: 8px;">ุชุญุฐูุฑ: ูุณุญ ุงูุจูุงูุงุช ูุง ูููู
                            ุงูุชุฑุงุฌุน ุนูู</small>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal ูุฅุถุงูุฉ ุนุฑุถ ุณุนุฑ -->
    <div id="quote-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ุนุฑุถ ุณุนุฑ</h3>
                <button class="close-btn" onclick="closeQuoteModal()">&times;</button>
            </div>
            <div id="quote-order-details" class="order-details-preview"></div>
            <form id="quote-form" onsubmit="submitQuote(event)">
                <input type="hidden" id="quote-order-id">
                <div class="form-group">
                    <label for="quote-price">ุงูุณุนุฑ (ุฌ.ู) *</label>
                    <input type="number" id="quote-price" required min="0" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="quote-delivery">ูุฏุฉ ุงูุชุณููู ุงููุชููุนุฉ *</label>
                    <input type="text" id="quote-delivery" required placeholder="ูุซุงู: 7-10 ุฃูุงู">
                </div>
                <div class="form-group">
                    <label for="quote-payment">ุดุฑูุท ุงูุฏูุน *</label>
                    <select id="quote-payment" required>
                        <option value="">ุงุฎุชุฑ ุดุฑูุท ุงูุฏูุน</option>
                        <option value="cash">ููุฏุงู</option>
                        <option value="30days">30 ููู</option>
                        <option value="60days">60 ููู</option>
                        <option value="installments">ุฃูุณุงุท</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="quote-notes">ููุงุญุธุงุช ุฅุถุงููุฉ</label>
                    <textarea id="quote-notes" rows="3" placeholder="ุฃู ุชูุงุตูู ุฅุถุงููุฉ"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">ุฅุฑุณุงู ุนุฑุถ ุงูุณุนุฑ</button>
                    <button type="button" class="btn btn-secondary" onclick="closeQuoteModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal ูุฅุถุงูุฉ ูุดุฑู -->
    <div id="supervisor-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ุฅุถุงูุฉ ูุดุฑู ูุฑุนู</h3>
                <button class="close-btn" onclick="closeSupervisorModal()">&times;</button>
            </div>
            <form id="supervisor-form" onsubmit="addSupervisor(event)">
                <div class="form-group">
                    <label for="supervisor-name">ุงูุงุณู *</label>
                    <input type="text" id="supervisor-name" required>
                </div>
                <div class="form-group">
                    <label for="supervisor-email-add">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
                    <input type="email" id="supervisor-email-add" required>
                </div>
                <div class="form-group">
                    <label for="supervisor-password-add">ูููุฉ ุงููุฑูุฑ *</label>
                    <input type="password" id="supervisor-password-add" required minlength="8">
                </div>
                <div class="form-group">
                    <label>ุงูุตูุงุญูุงุช</label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked disabled>
                        <span>ุนุฑุถ ุงูุทูุจุงุช</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" checked disabled>
                        <span>ุฅุถุงูุฉ ุนุฑูุถ ุฃุณุนุงุฑ</span>
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">ุฅุถุงูุฉ ุงููุดุฑู</button>
                    <button type="button" class="btn btn-secondary" onclick="closeSupervisorModal()">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast ููุฅุดุนุงุฑุงุช -->
    <div id="toast" class="toast"></div>

    <script src="db.js"></script>
    <script src="admin-script.js"></script>
</body>

</html>